# 2025年夏季《移动软件开发》实验报告



<center>姓名：陈怡冰  学号：23020007007</center>

| 姓名和学号？         | 陈怡冰，23020007007                                          |
| -------------------- | ------------------------------------------------------------ |
| 本实验属于哪门课程？ | 中国海洋大学25夏《移动软件开发》                             |
| 实验名称？           | 实验5：第一个 HarmonyOS 应用                                 |
| 博客地址？           | [OUC-2025年夏季《移动软件开发》实验报告-实验五-CSDN博客](https://blog.csdn.net/2301_81554020/article/details/151330199?sharetype=blogdetail&sharerId=151330199&sharerefer=PC&sharesource=2301_81554020&spm=1011.2480.3001.8118) |
| Github仓库地址？     | [ChenFirstIce/Mobile-software-development-for-the-summer-semester-of-2025: OUC-2025夏季学期《移动软件开发》课程的六个实验以及个人项目的课程报告以及代码。主要是使用微信小程序开发工具开发微信小程序，并涉及到一点鸿蒙系统。](https://github.com/ChenFirstIce/Mobile-software-development-for-the-summer-semester-of-2025/tree/main) |

（备注：将实验报告发布在博客、代码公开至 github 是 **加分项**，不是必须做的）



## **一、实验目标**

 1、掌握如何构建 HarmonyOS应用；

 2、掌握应用程序包结构、资源文件的使用；

 3、掌握ArkTS的核心功能和语法等基础知识，为后续的应用开发奠定基础。

## 二、实验步骤

### 2.1 创建ArkTS工程

1. 首次打开DevEco Studio，点击Create Project创建工程

   ![](images\72a776295aa2aabd7fbaf4c1f72ad66c.png)

2. 选择Application应用开发，选择模板Empty  Ability，单击Next进行下一步配置。

3. 进入配置工程界面，点击**Finish**，完成工程的创建

   ![](images\32c5fe30c783942c2fcf12a4702c5389.png)

### 2.2 构建第一个页面

1. 使用文本组件

   打开index.ets文件，将页面从 RelativeContainer相对布局修改成Row/Column线性布局；在探索中发现：

   - `build()`相当于页面的主体
   - `Row()`和`Column()`相当于组件的布局
   - `Text()`和`Button()`相当于组件，但是它的内容和样式以及可能触发的事件（还包括这个函数的内容）都写在一起了，这个是跟微信小程序非常不一样的地方。

2. 添加按钮

   添加`Button()`组件，并增加一个想用用户的`onClick()`事件（相当于一个函数），从而实现跳转到另一个页面。

   ```ArkTS
   // Index.ets
   import {BusinessError} from '@kit.BasicServicesKit'
   
   @Entry
   @Component
   struct Index {
     @State message: string = 'Hello World';
   
     build() {
       Row() {//设置row
         Column() {
           Text(this.message)
             .fontSize(50)
             .fontWeight(FontWeight.Bold)
           Button(){
             Text('Next')//可以直接设置Button的文字
               .fontSize(30)
               .fontWeight(FontWeight.Bold)
           }
           .type(ButtonType.Capsule)
           .margin({
             top: 20
           })
           .backgroundColor('#0D9FFB')
           .width('40%')
           .height('5%')
           //可以设置函数
           .onClick(() => {
             console.info(`Succeeded in clicking the 'Next' button.`)
             // 获取UIContext
             let uiContext: UIContext = this.getUIContext();
             let router = uiContext.getRouter();
             // 跳转到第二页
             router.pushUrl({ url: 'pages/Second' }).then(() => {
               console.info('Succeeded in jumping to the second page.')
             }).catch((err: BusinessError) => {
               console.error(`Failed to jump to the second page. Code is ${err.code},
               message is ${err.message}`)
             })
           })
         }
         .width('100%')
       }
       .height('100%')
     }
   }
   ```

3. 第一个页面的最终效果：

   <img src="D:\25大三上夏季小学期\移动软件开发\实验五\images\7523f969c0f7f869a18e5f7f65eb395a.png" style="zoom:33%;" />



### 2.3 构建第二个页面

1. 新建第二个页面文件。在Project窗口，打开entry > src > main > ets，右键单击pages文件夹，选择 New > ArkTS File，命名为Second，单击回车键。**并在main_pages.json文件中的"src"下配置第二个页面的路由"pages/Second"。（容易遗漏）**

   ```json
   {
     "src": [
       "pages/Index",
       "pages/Second"
     ]
   }
   ```

2. 添加文本及按钮

   参照第一个页面，其实差不多

   ```ArkTS
   import {BusinessError} from '@kit.BasicServicesKit'
   
   @Entry
   @Component
   struct Second{
     @State message: string = 'Hi there';
   
     build() {
       Row() {//y轴设置
         Column() {//x轴设置
           Text(this.message)
             .fontSize(50)//相当于css的样式设置
             .fontWeight(FontWeight.Bold)
           Button() {//按钮
             Text('Back')
               .fontSize(30)//按钮text的样式设置
               .fontWeight(FontWeight.Bold)
           }
           .type(ButtonType.Capsule)
           .margin({
             top: 20
           })
           .backgroundColor('#0D9FFB')
           .width('40%')
           .height('5%')
           .onClick(() => {
             console.info(`Succeeded in clicking the 'Back' button.`)
             // 获取UIContext
             let uiContext: UIContext = this.getUIContext();
             let router = uiContext.getRouter();
             try {
               // 返回第一页
               router.back()
               console.info('Succeeded in returning to the first page.')
             } catch (err) {
               let code = (err as BusinessError).code;
               let message = (err as BusinessError).message;
               console.error(`Failed to return to the first page. Code is ${code}, message is ${message}`)
             }
           })
         }
   
         .width('100%')
       }
       .height('100%')
     }
   }
   ```

3. 页面二的效果如下

   <img src="D:\25大三上夏季小学期\移动软件开发\实验五\images\a10edf42ba8d1f2af4a3eee35a225ab5.png" style="zoom:33%;" />

### 2.4 实现页面间的跳转

1. 页面间的导航可以通过页面路由router来实现。页面路由router根据页面url找到目标页面，从而实现跳转。（相当于url跳转）

2. 在一个页面跳转到第二个页面

   补充`onClick`事件

   - 获取一个`UIContext`对象，方便获取上下文

     ```ArkTS
     let uiContext: UIContext = this.getUIContext();
     let router = uiContext.getRouter();
     ```

   - 通过url实现跳转，（如果有）输出页面错误信息

     ```ArkTS
     router.pushUrl({ url: 'pages/Second' }).then(() => {
     console.info('Succeeded in jumping to the second page.')
     }).catch((err: BusinessError) => {
         console.error(`Failed to jump to the second page. Code is ${err.code},
         message is ${err.message}`)
     ```

3. 在第一个页面跳转到第二个页面

   和页面一差不多

   但是只要使用`router.back()`即可完成回退

   ```ArkTS
     let uiContext: UIContext = this.getUIContext();
     let router = uiContext.getRouter();
     try {
       // 返回第一页
       router.back()
       console.info('Succeeded in returning to the first page.')
    } catch (err) {
       let code = (err as BusinessError).code; 
       let message = (err as BusinessError).message; 
       console.error(`Failed to return to the first page. Code is ${code}, 
   message is ${message}`)
   
   ```

## 三、程序运行结果

列出程序的最终运行结果及截图。

![](images\7523f969c0f7f869a18e5f7f65eb395a.png)

![a10edf42ba8d1f2af4a3eee35a225ab5](images\a10edf42ba8d1f2af4a3eee35a225ab5.png)

## 四、问题总结与体会

#### 问题一：输出错误信息“Error Message: D:\DevEco Studioltools\node\npm.cmd install,pnpm execute failed”

![](images\d91d885458aa20350b9e783d411e39be.png)

#### 解决方案：

是因为之前下载微信小程序插件的时候下载了的npm的版本不对导致pnpm无法下载，所以直接卸载npm即可。

### 心得体会：

虽然了解的不是很深入，但是感觉整体的架构和思想和微信小程序还是挺像的，只是把前端和后端都融合在一起了。

